<!--登录界面-->
<!DOCTYPE html>
<html lang="en">
<head>
    <title>租户登录</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--===============================================================================================-->
    <link rel="icon" type="image/png" href="/static/images/icons/favicon.ico"/>
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/static/vendor/bootstrap/css/bootstrap.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/static/fonts/font-awesome-4.7.0/css/font-awesome.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/static/fonts/Linearicons-Free-v1.0.0/icon-font.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/static/vendor/animate/animate.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/static/vendor/css-hamburgers/hamburgers.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/static/vendor/animsition/css/animsition.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/static/vendor/select2/select2.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/static/vendor/daterangepicker/daterangepicker.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="/static/css/util.css">
    <link rel="stylesheet" type="text/css" href="/static/css/login.css">
    <!--===============================================================================================-->
</head>
<body>

<div class="limiter">
    <div class="container-login100" style="background-image: url('/static/images/bg-01.jpg');">
        <div class="wrap-login100 p-t-30 p-b-50">
				<span class="login100-form-title p-b-41">
					租户登录
				</span>
            <form class="login100-form validate-form p-b-33 p-t-5" method="post">
                {% csrf_token %}<!--Django表单界面必加，用于安全认证-->
                <div class="wrap-input100 validate-input" data-validate="Enter username">
                    <input class="input100" type="text" id="username" name="username" placeholder="手机号">
                    <span class="focus-input100" data-placeholder="&#xe82a;"></span>
                </div>

                <div class="wrap-input100 validate-input" data-validate="Enter password">
                    <input class="input100" type="password" id="password" name="password" placeholder="密码">
                    <span class="focus-input100" data-placeholder="&#xe80f;"></span>
                </div>

                <div class="container-login100-form-btn m-t-32">
                    <button class="login100-form-btn" type="submit" id="submit">
                        登录
                    </button>
                    <a href="register" id="register_click" class="loginhere-link">用户注册</a>
                    <a href="login" id="login_click" class="loginhere-link" hidden>用户登录</a> <!--直接跳转至登录界面，以及ajax跳转url-->
                    <a href="main" id="main_click" class="loginhere-link" hidden>用户主界面</a>
                </div>

            </form>
        </div>
    </div>
</div>


<div id="dropDownSelect1"></div>

<!--===============================================================================================-->
<script src="/static/vendor/jquery/jquery-3.2.1.min.js"></script>
<!--===============================================================================================-->
<script src="/static/vendor/animsition/js/animsition.min.js"></script>
<!--===============================================================================================-->
<script src="/static/vendor/bootstrap/js/popper.js"></script>
<script src="/static/vendor/bootstrap/js/bootstrap.min.js"></script>
<!--===============================================================================================-->
<script src="/static/vendor/select2/select2.min.js"></script>
<!--===============================================================================================-->
<script src="/static/vendor/daterangepicker/moment.min.js"></script>
<script src="/static/vendor/daterangepicker/daterangepicker.js"></script>
<!--===============================================================================================-->
<script src="/static/vendor/countdowntime/countdowntime.js"></script>
<!--===============================================================================================-->
<script src="/static/js/login.js"></script>
<!--调用Jquery.js-->
<script src="/static/js/jquery.js"></script>

<!--发送Ajax请求-->
<script>
        /*绑定submit方法*/
        $('#submit').bind('click',function(){

            <!--django csrf认证添加，for ajax-->
            $.ajaxSetup({
             data: {csrfmiddlewaretoken: '{{ csrf_token }}' },
            });

            <!--获取前端输入数据-->
            var username = $('#username').val();
            var password = $('#password').val();
            var post_data ={"username":username,"password":password,};
            <!--ajax请求-->
            $.ajax({
                url:'/login/login  ', //url指的是相对于本机服务器，请求的uri位置
                type:'POST',   //方法：例如Post/get等等
                data : post_data, /*客户端发送给服务器传递的参数*/
                dataType:"json",  /*参数数据类型*/
                success: function (data) {  //此处的data表示服务器传过来的json数据
                var flag_href = data['flag_href'];
                if (flag_href == "1") //1表示跳转，注册成功
                {
                    alert("用户登录成功");
                    document.getElementById("main_click").click();<!--点击a标签，实现跳转url-->
                }
                /*表示有存在错误信息*/
                else{
                    var error_info = data['error_info']; //获取错误信息
                    alert(error_info) //显示错误信息
                    document.getElementById("login_click").click();<!--点击a标签，实现刷新界面，待完善，这个方法感觉不对-->
                }
            }
            });
        });
    </script>
</body>
</html>